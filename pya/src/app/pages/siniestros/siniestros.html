<div class="max-w-3xl mx-auto mt-12 p-8 bg-white rounded-3xl shadow-xl border border-slate-100">
  <!-- Botón para volver atrás -->
  <div class="mb-6">
    <button (click)="goBack()" class="flex items-center gap-2 px-4 py-2 bg-slate-200 text-slate-800 rounded-xl font-bold hover:bg-slate-300 transition-all">
      <span class="material-icons">arrow_back</span> Volver
    </button>
  </div>
  <h2 class="text-3xl font-black text-slate-800 mb-8">Siniestros Registrados</h2>
  <div *ngIf="loading" class="text-slate-500">Cargando siniestros...</div>
  <div *ngIf="error" class="text-red-600 font-bold">{{ error }}</div>
  <div *ngIf="!loading && siniestros.length === 0" class="text-slate-500">No hay siniestros registrados.</div>
  <table *ngIf="!loading && siniestros.length > 0" class="min-w-full mt-4">
    <thead>
      <tr>
        <th class="text-left py-2 px-4">ID</th>
        <th class="text-left py-2 px-4">Tipo</th>
        <th class="text-left py-2 px-4">Descripción</th>
        <th class="text-left py-2 px-4">Fecha</th>
        <th class="text-left py-2 px-4">Estado</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let s of siniestros">
        <td class="py-2 px-4">{{ s.idAuto || s.id }}</td>
        <td class="py-2 px-4">{{ s.tipo }}</td>
        <td class="py-2 px-4">{{ s.descripcion }}</td>
        <td class="py-2 px-4">{{ s.fechaRegistro | date:'short' }}</td>
        <td class="py-2 px-4">{{ s.estadoCaso }}</td>
      </tr>
    </tbody>
  </table>

  <ng-container *ngIf="rol !== 'ADMIN'">
    <hr class="my-8" />
    <h3 class="text-2xl font-black text-slate-800 mb-4">Probar Backend (flujo rápido)</h3>
    <div class="grid gap-3 mb-4">
      <input class="border rounded px-3 py-2" placeholder="ID Estudiante" [(ngModel)]="nuevo.idEstudiante" />
      <input class="border rounded px-3 py-2" placeholder="Descripción" [(ngModel)]="nuevo.descripcion" />
      <button (click)="crearTramiteBackend()" [disabled]="creando" class="px-4 py-2 bg-blue-600 text-white rounded font-bold hover:bg-blue-700">
        {{ creando ? 'Creando…' : 'Crear Trámite' }}
      </button>
      <input class="border rounded px-3 py-2" placeholder="ID Trámite" [(ngModel)]="tramiteId" />
      <div class="flex gap-2 flex-wrap">
        <button (click)="validarBackend()" class="px-3 py-2 bg-slate-700 text-white rounded">Validar</button>
        <input class="border rounded px-3 py-2" placeholder="ID Aseguradora" [(ngModel)]="idAseguradora" />
        <button (click)="enviarAsegBackend()" class="px-3 py-2 bg-slate-700 text-white rounded">Enviar a Aseguradora</button>
        <button (click)="aprobarBackend()" class="px-3 py-2 bg-green-700 text-white rounded">Registrar Aprobado</button>
        <button (click)="solicitarCorreccionesBackend()" class="px-3 py-2 bg-amber-600 text-white rounded">Solicitar Correcciones</button>
        <input class="border rounded px-3 py-2" placeholder="Referencia de Pago" [(ngModel)]="referenciaPago" />
        <button (click)="confirmarPagoBackend()" class="px-3 py-2 bg-indigo-700 text-white rounded">Confirmar Pago</button>
        <button (click)="verHistorialBackend()" class="px-3 py-2 bg-slate-700 text-white rounded">Ver Historial</button>
      </div>
      <div class="text-sm text-slate-700">{{ backendMsg }}</div>
    </div>

    <div class="grid gap-3">
      <h4 class="text-xl font-bold">Subir Documento (backend)</h4>
      <div class="flex gap-2 items-center flex-wrap">
        <select class="border rounded px-3 py-2" [(ngModel)]="tipoDocumento">
          <option value="IDENTIDAD">IDENTIDAD</option>
          <option value="CERT_MATRICULA">CERT_MATRICULA</option>
          <option value="OTROS">OTROS</option>
        </select>
        <input type="file" (change)="onArchivoChange($event)" />
        <button (click)="subirDocumentoBackend()" class="px-3 py-2 bg-teal-700 text-white rounded">Subir</button>
      </div>
    </div>
  </ng-container>
</div>
