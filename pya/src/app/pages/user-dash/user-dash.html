<div class="max-w-6xl mx-auto space-y-8 animate-fade-in p-4">

  <!-- Loader -->
  <div *ngIf="cargando" class="text-center py-20">
    <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"></div>
    <p class="mt-4 text-slate-500">Cargando dashboard...</p>
  </div>

  <!-- DASHBOARD CLIENTE -->
  <div *ngIf="!cargando && rol === 'CLIENTE' && datosCliente">
    
    <div class="mb-6">
      <h2 class="text-4xl font-black text-slate-800">Mi Dashboard</h2>
      <p class="text-slate-500">Bienvenido, {{ datosCliente.estudiante?.nombreCompleto || 'Estudiante' }}</p>
    </div>

    <!-- Estado del seguro -->
    <div class="bg-gradient-to-r from-emerald-500 to-emerald-600 text-white p-6 rounded-2xl shadow-xl">
      <div class="flex justify-between items-start">
        <div>
          <p class="text-emerald-100 text-sm font-bold mb-2">Estado de Cobertura</p>
          <p class="text-4xl font-black">${{ datosCliente.estadoCobertura | number:'1.2-2' }}</p>
          <p class="text-emerald-100 text-sm mt-2">CÃ©dula: {{ datosCliente.estudiante?.cedula }}</p>
        </div>
        <div class="bg-white/20 p-3 rounded-xl">
          <span class="text-3xl">ğŸ›¡ï¸</span>
        </div>
      </div>
    </div>

    <!-- Mis TrÃ¡mites -->
    <div class="bg-white rounded-2xl shadow-xl p-6">
      <h3 class="text-2xl font-black text-slate-800 mb-4">ğŸ“‹ Mis TrÃ¡mites</h3>
      
      <div *ngIf="datosCliente.misTramites.length === 0" class="text-center py-8 text-slate-400">
        No tienes trÃ¡mites registrados
      </div>

      <div *ngFor="let tramite of datosCliente.misTramites" 
           class="p-4 border border-slate-200 rounded-xl mb-3 hover:shadow-md transition-all">
        <div class="flex justify-between items-start">
          <div>
            <p class="font-bold text-slate-800">{{ tramite.codigoUnico }}</p>
            <p class="text-sm text-slate-600">{{ tramite.tipoTramite }} - {{ tramite.motivo }}</p>
            <span class="inline-block mt-2 px-3 py-1 rounded-full text-xs font-bold"
                  [ngClass]="{
                    'bg-amber-100 text-amber-700': tramite.estadoCaso === 'EN_VALIDACION',
                    'bg-emerald-100 text-emerald-700': tramite.estadoCaso === 'APROBADO',
                    'bg-red-100 text-red-700': tramite.estadoCaso === 'RECHAZADO'
                  }">
              {{ tramite.estadoCaso }}
            </span>
          </div>
          <div class="text-right">
            <p class="text-xs text-slate-400">{{ tramite.fechaRegistro | date:'short' }}</p>
            <p *ngIf="tramite.montoAprobado > 0" class="text-lg font-bold text-emerald-600 mt-1">
              ${{ tramite.montoAprobado }}
            </p>
          </div>
        </div>
      </div>

      <div class="mt-4">
        <a routerLink="/registro-siniestro" 
           class="block w-full bg-indigo-600 text-white font-bold py-3 rounded-xl text-center hover:bg-indigo-700 transition-all">
          â• Registrar Nuevo TrÃ¡mite
        </a>
      </div>
    </div>

    <!-- Mis Documentos -->
    <div class="bg-white rounded-2xl shadow-xl p-6">
      <h3 class="text-2xl font-black text-slate-800 mb-4">ğŸ“„ Mis Documentos</h3>
      
      <div *ngIf="datosCliente.misDocumentos.length === 0" class="text-center py-8 text-slate-400">
        No has subido documentos
      </div>

      <div *ngFor="let doc of datosCliente.misDocumentos"
           class="p-4 bg-slate-50 rounded-xl mb-3 flex justify-between items-center">
        <div>
          <p class="font-bold text-slate-800">{{ doc.nombreArchivo }}</p>
          <p class="text-sm text-slate-500">Tipo: {{ doc.tipo }}</p>
          <p class="text-xs text-slate-400">{{ doc.fechaCarga | date:'short' }}</p>
        </div>
        <a *ngIf="doc.url" [href]="doc.url" target="_blank" 
           class="px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold hover:bg-indigo-700">
          Descargar
        </a>
      </div>

      <div class="mt-4">
        <a routerLink="/documentos" 
           class="block w-full bg-slate-800 text-white font-bold py-3 rounded-xl text-center hover:bg-slate-900 transition-all">
          ğŸ“ Subir Nuevo Documento
        </a>
      </div>
    </div>

    <!-- Notificaciones -->
    <div class="bg-white rounded-2xl shadow-xl p-6">
      <h3 class="text-2xl font-black text-slate-800 mb-4">ğŸ”” Notificaciones</h3>
      
      <div *ngIf="datosCliente.misNotificaciones.length === 0" class="text-center py-8 text-slate-400">
        No tienes notificaciones
      </div>

      <div *ngFor="let notif of datosCliente.misNotificaciones.slice(0, 5)"
           class="p-4 border-l-4 border-indigo-500 bg-indigo-50 rounded-r-xl mb-3">
        <p class="font-bold text-slate-800">{{ notif.tipo }}</p>
        <p class="text-sm text-slate-600">{{ notif.mensaje }}</p>
        <p class="text-xs text-slate-400 mt-1">{{ notif.fechaEnvio | date:'short' }}</p>
      </div>
    </div>

  </div>

  <!-- DASHBOARD GESTOR -->
  <div *ngIf="!cargando && rol === 'GESTOR' && datosGestor">
    
    <div class="mb-6">
      <h2 class="text-4xl font-black text-slate-800">Dashboard Gestor</h2>
      <p class="text-slate-500">Panel de control administrativo</p>
    </div>

    <!-- EstadÃ­sticas rÃ¡pidas -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="bg-amber-50 border-2 border-amber-200 p-6 rounded-2xl">
        <p class="text-xs font-black text-amber-600 uppercase mb-2">â³ En ValidaciÃ³n</p>
        <p class="text-4xl font-black text-amber-700">{{ datosGestor.tramitesEnValidacion.length }}</p>
      </div>
      <div class="bg-emerald-50 border-2 border-emerald-200 p-6 rounded-2xl">
        <p class="text-xs font-black text-emerald-600 uppercase mb-2">ğŸ‘¨â€ğŸ“ Estudiantes Activos</p>
        <p class="text-4xl font-black text-emerald-700">{{ datosGestor.estudiantesActivos }}</p>
      </div>
      <div class="bg-indigo-50 border-2 border-indigo-200 p-6 rounded-2xl">
        <p class="text-xs font-black text-indigo-600 uppercase mb-2">ğŸ“… TrÃ¡mites Hoy</p>
        <p class="text-4xl font-black text-indigo-700">{{ datosGestor.tramitesHoy }}</p>
      </div>
    </div>

    <!-- TrÃ¡mites en ValidaciÃ³n -->
    <div class="bg-white rounded-2xl shadow-xl p-6">
      <h3 class="text-2xl font-black text-slate-800 mb-4">ğŸ“‹ TrÃ¡mites en ValidaciÃ³n</h3>
      
      <div *ngIf="datosGestor.tramitesEnValidacion.length === 0" class="text-center py-8 text-slate-400">
        No hay trÃ¡mites pendientes
      </div>

      <div *ngFor="let tramite of datosGestor.tramitesEnValidacion"
           class="p-4 border border-amber-300 bg-amber-50 rounded-xl mb-3">
        <div class="flex justify-between items-start">
          <div>
            <p class="font-bold text-slate-800">{{ tramite.codigoUnico }}</p>
            <p class="text-sm text-slate-600">{{ tramite.tipoTramite }} - {{ tramite.motivo }}</p>
            <p class="text-xs text-slate-400 mt-1">Registrado: {{ tramite.fechaRegistro | date:'short' }}</p>
          </div>
          <div class="flex gap-2">
            <button (click)="validarTramite(tramite.idTramite || tramite.id)" 
                    class="px-4 py-2 bg-emerald-600 text-white rounded-lg text-sm font-bold hover:bg-emerald-700">
              âœ“ Aprobar
            </button>
            <button (click)="rechazarTramite(tramite.idTramite || tramite.id)" 
                    class="px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-bold hover:bg-red-700">
              âœ— Rechazar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Accesos rÃ¡pidos -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div (click)="navegarEstudiantes()" 
         class="block p-6 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-2xl hover:shadow-xl transition-all cursor-pointer">
        <p class="text-3xl mb-2">ğŸ‘¨â€ğŸ“</p>
        <p class="text-xl font-black">Gestionar Estudiantes</p>
        <p class="text-indigo-100 text-sm">Crear y actualizar registros</p>
      </div>
      <a routerLink="/documentos" 
         class="block p-6 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-2xl hover:shadow-xl transition-all">
        <p class="text-3xl mb-2">ğŸ“</p>
        <p class="text-xl font-black">Documentos</p>
        <p class="text-emerald-100 text-sm">Revisar y validar documentaciÃ³n</p>
      </a>
    </div>

  </div>

</div>
